
	<!-- <script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>-->
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<!--  <script type="text/javascript" src="third-party/jquery/jquery-migrate/dist/jquery-migrate.js"></script> -->
	<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<!-- 	<script type="text/javascript" src="third-party/jquery/jquery-ui/dist/jquery-ui.js"></script> -->
	<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.min.js"></script>
	
<script type="text/javascript" src="src/CTATDateTime.js"></script>
<script type="text/javascript" src="node_modules/jstz/dist/jstz.min.js"></script>

<script src="node_modules/google-closure-library/closure/goog/base.js"></script>
<script src="CTAT-deps.js"></script>

<script>
	goog.require('TutorShopAPIProxy');
	goog.require('CTATGlobalFunctions');
	goog.require('CTATForBrowsers');
	goog.require('CTATBase');
	goog.require('CTATConfig');
	goog.require('CTATTutorGoogleSideBar');
	goog.require('CTATNameTranslator');
	//goog.require('CTATExampleTracer'); // in case of jstracer
</script>

<script type="text/javascript" src="http://augustus.pslc.cs.cmu.edu/html5/src/google/rpcobject.js"></script>
<script type="text/javascript" src="http://augustus.pslc.cs.cmu.edu/html5/src/google/queue.js"></script>
<script type="text/javascript" src="http://augustus.pslc.cs.cmu.edu/html5/src/google/gasqueue.js"></script>

<script type="text/javascript" src="http://augustus.pslc.cs.cmu.edu/html5/src/google/ctattablegoogle.js"></script>
		
<style type="text/css">

body 
{
	background: #ffffff url(GoogleApps/layout_grid.gif) center top;
	-webkit-background-size: cover;
	-moz-background-size: cover;
	background-size: cover;
	overflow:hidden;
}
	
.container 
{ 
	z-index: 0;
	position: relative;
	margin: 2px;
	vertical-align: middle;
}
	
canvas
{
	border: 1px solid black; 
	background-color: #ffffff;
	z-index: 1;
	position: relative;		
}	

.console 
{ 
	background-color: #ffffff;
	width: 280px;  		  
	height: 0px;
	text-align: left;
	overflow: auto;
	font-family: courier; 
	font-size: 10px;
	border: 1px solid black;
	margin: 2px;
	position: relative;
}	
		
</style>
	
<script language="javascript">
	
var consoleFolded=true;

useDebugging=true;

/**
*
*/
function clearConsole ()
{
	console=document.getElementById("console");
	
	console.innerHTML="";
}
/**
*
*/
function foldConsole ()
{
	console=document.getElementById("console");
	
	if (consoleFolded==false)
	{
		consoleFolded=true;
		console.style.height="0px";
	}
	else
	{
		consoleFolded=false;
		console.style.height="300px";
	}
}    
/**
*
*/
function toggleDebugging(cb) 
{				
	if (cb.checked==true)
		useDebugging=true;
	else
		useDebugging=false;						
}		
	
	
var FlashVars=
{    
	admit_code:"ies",
	authenticity_token:"none",
	auth_token:"none",
	BehaviorRecorderMode:"'AuthorTimeTutoring",
	class_name:"Default Class",
	curriculum_service_url:"none",
	dataset_level_name:"none",
	dataset_level_type:"ProblemSet",
	dataset_name:"none",
	expire_logout_url:"none",
	info:"%3Cdiv+id%3D%27label%27%3EFactors%3A%3C%2Fdiv%3E%3Cdiv+id%3D%27caption%27%3E+Problem+1+of+2%3C%2Fdiv%3E",
	instructor_name:"none",
	instrumentation_log:"off",
	lcId:"none",
	Logging:"ClientToService", // 'ClientToService' or 'ClientToLogServer'
	log_service_url:"http:pslc-qa.andrew.cmu.edu/log/server",
	problem_name:"none",
	problem_position:"none",
	problem_started_url:"none",
	problem_state_status:"empty", //  'empty', 'complete', or 'incomplete'
	question_file:"http://augustus.pslc.cs.cmu.edu/html5/HTML5TestFiles/HTML5TableJSON.brd",
	refresh_session_url:"none",
	remoteSocketPort:"8081",
	remoteSocketURL:"augustus.pslc.cs.cmu.edu",
	restore_problem_url:"none",
	reuse_swf:"false",
	run_problem_url:"none",
	school_name:"none",
	SessionLog:"true",
	session_id:"none",
	session_timeout:"none",
	skills:"%3CSkills%3E%0A%3CSkill%20opportunityCount%3D%222%22%20category%3D%22fraction-addition%22%20name%3D%22add-numerators%22%20label%3D%22add-numerators%22%20description%3D%22add-numerators%22%20pGuess%3D%220.15%22%20pSlip%3D%220.3%22%20pLearn%3D%220.25%22%20pKnown%3D%220.2%22%20%2F%3E%0A%3CSkill%20opportunityCount%3D%222%22%20category%3D%22fraction-addition%22%20name%3D%22multiply-denominators%22%20label%3D%22multiply-denominators%22%20description%3D%22multiply-denominators%22%20pGuess%3D%220.15%22%20pSlip%3D%220.3%22%20pLearn%3D%220.25%22%20pKnown%3D%220.98%22%20%2F%3E%0A%3CSkill%20opportunityCount%3D%222%22%20category%3D%22fraction-addition%22%20name%3D%22convert-numerator%22%20label%3D%22convert-numerator%22%20description%3D%22convert-numerator%22%20pGuess%3D%220.15%22%20pSlip%3D%220.3%22%20pLearn%3D%220.25%22%20pKnown%3D%220.1%22%20%2F%3E%0A%3CSkill%20opportunityCount%3D%222%22%20category%3D%22fraction-addition%22%20name%3D%22determine-lcd%22%20label%3D%22determine-lcd%22%20description%3D%22determine-lcd%22%20pGuess%3D%220.15%22%20pSlip%3D%220.3%22%20pLearn%3D%220.25%22%20pKnown%3D%220.6%22%20%2F%3E%0A%3C%2FSkills%3E",
	source_id:"FLASH_PSEUDO_TUTOR", // 'FLASH_PSEUDO_TUTOR' or 'CTAT_JAVA_TUTOR'
	student_interface:"none",
	student_problem_id:"none",
	study_condition_name:"none",
	study_condition_type:"none",
	study_conditon_description:"none",
	study_name:"Study1",
	target_frame:"none",
	TutorShopDeliveryMethod:"sendandload",
	user_guid:"none",
	wmode:"opaque",
	log_to_disk_directory:"none",
	DeliverUsingOLI:"none"
};

/**
*
*/
function listCTATComponents() 
{				
	var tempValue=useDebugging;
	
	useDebugging=true;	
	var tools=new CTATShellTools ();
	tools.listComponents ();	
	useDebugging=tempValue;
}	
			
/**
*
*/
function selectConsoleText ()
{
	selectText('console');
}

/**
*
*/
function init ()
{		
	ctatdebug ("init ()");
	
	//assignNameTranslator (new CTATNameTranslator ());
		
	initTutorSidebar (FlashVars);
}

/**
*
*/
function unitTests ()
{
	ctatdebug ("unitTests ()");
	
	testTutor (CTATConfiguration.getRawFlashVars());
}

//>-----------------------------------------------------------------
// Google specific code
//>-----------------------------------------------------------------

var intervalId;

/**
* Google specific function
*/
function onFailure(error) 
{
	ctatdebug ("checkOnEditQueue ()");
	
    alert(error.message);
}

/**
* Google specific function
*/
function startTimer() 
{
	ctatdebug ("startTimer ()");
	
	intervalId = window.setTimeout("checkOnEditQueue()", 1000);
}

/**
* Google specific function
*/
function stopTimer() 
{
	ctatdebug ("stopTimer ()");
	
	window.clearTimeout(intervalId);
}

/**
* Sheet methods available for API-ification:
* https://developers.google.com/apps-script/reference/spreadsheet/sheet
*/
function onEditSuccess(editedRange) 
{
	ctatdebug ("onEditSuccess ("+editedRange+")");
	
    if (editedRange != null) 
    {		
		ctatdebug ("last edit was " + editedRange.a1Notation + " value " + editedRange.value);
      
		if (editedRange.value < 15) 
		{
			google.script.run.withFailureHandler(onFailure).highlightCell(editedRange.a1Notation, "green");
		}
		else 
		{
			google.script.run.withFailureHandler(onFailure).highlightCell(editedRange.a1Notation, "red");
		}
      
		intervalId = window.setTimeout("checkOnEditQueue()", 500);
	}
	else 
	{
		intervalId = window.setTimeout("checkOnEditQueue()", 1000);
	}
}

/**
*
*/
function checkOnEditQueue() 
{
	ctatdebug ("checkOnEditQueue ()");
	
    //t = t + 1;
	
    var editedCell = google.script.run.withSuccessHandler(onEditSuccess).
									   withFailureHandler(onFailure).
									   dequeueRangeValueOnEdit();
}

</script>
	

<table cellpadding="0" cellspacing="2" height="100%" style="width:280px; margin:2px; padding:1px; border:1px solid #000000; background-color:#ffffff;">
<tr>
	<td style="margin:0px; padding:2px; background-color:#eeeeee;" valign="top">
		<div id="info">&nbsp;</div>
		<div id="container" name="container" class="container">
			<canvas id="main-canvas" width="280" height="400">Your browser does not support CTAT. Please update or replace your browser.</canvas>
		</div>
		
		<div width="280">
			<center>
			<input type="checkbox" id="debugtraces" name="debugtraces" value="debugtraces" onclick='toggleDebugging(this);'>Debug
			<button type="button" onclick="init ()" id="starter"><img src="http://augustus.pslc.cs.cmu.edu/html5/play.png" alt="Start Tutor" /></button>
			<button type="button" onclick="unitTests ()"><img src="http://augustus.pslc.cs.cmu.edu/html5/check_mark.png" alt="Unit Tests" /></button>
			<button type="button" onclick="listCTATComponents ()"><img src="http://augustus.pslc.cs.cmu.edu/html5/list.png" alt="List CTAT Components" /></button>
			<button type="button" onclick="clearConsole ()"><img src="http://augustus.pslc.cs.cmu.edu/html5/edit-clear.png" alt="Clear Console" /></button>
			<button type="button" onclick="foldConsole ()"><img src="http://augustus.pslc.cs.cmu.edu/html5/fold.png" alt="Fold Console" /></button>
			</center>								
		</div>			

		<div id="console" class="console" width="280"></div>
	</td>
</tr>
</table>

<div style="width:280px; margin:0px; padding:0px; border:0px; text-align:center; font-size:8pt;">
Built with <a href="http://ctat.pact.cs.cmu.edu/">CTAT</a>
</div>
