/* This object represents a CTATRegexMatcher */

goog.provide('CTATRegexMatcher');
goog.require('CTATSingleMatcher');

/* Author: Dhruv Chand 07/31*/

/*
 * @param vector of type integer
 * @param value of type string
 */
CTATRegexMatcher = function(vector, value)
{

    /**************************** PUBLIC INSTACE VARIABLES ******************************************************/

    //calling the constructor of the object we are inheriting from: CTATSingleMatcher
    CTATSingleMatcher.call(this, vector, true);

    /**************************** PRIVATE INSTACE VARIABLES ******************************************************/

    var singlePattern = null; //of type string
    var singlePatternObj = null; // instance of RegExp
    var that = this; // used to make the object available to the private methods

    /***************************** PRIVATE METHODS *****************************************************/

    /***************************** PRIVILEDGED METHODS *****************************************************/

    /**
     * @return a string
     */
    this.toString = function()
    {
        return singlePattern;
    };

    /**
     * @param {string} pattern
     * @return undefined
     */
    this.setSinglePattern = function(pattern)
    {
        if ( typeof (pattern) === 'undefined' || pattern === null)
        {
			console.log("CTATRegexMatcher: null or undefined pattern");
            return;
        }
        singlePattern = pattern;
        singlePatternObj = (that.getCaseInsensitive() ? new RegExp(pattern, "i") : new RegExp(pattern));
    };

	/**
	 * @param {string} pattern for setSinglePattern()
	 */
    this.setSingle = function(pattern)
    {
        that.setSinglePattern(pattern);
    };

	/**
	 * @param {string} s string to test
	 * @return {boolean} true if all of s matches singlePattern
	 */
	this.matchSingle = function(s)
	{
		if(s == null)
			return (getSingle() == null);
		if(singlePatternObj == null)
		{
			console.log("Error: CTATRegexMatcher.matchSingle called before pattern has been set");
			return false;
		}
		var A = singlePatternObj.exec(s);
		return (A != null && A[0] == s);
	}
};

CTATRegexMatcher.prototype = Object.create(CTATSingleMatcher.prototype);
CTATRegexMatcher.prototype.constructor = CTATRegexMatcher;

if(typeof module !== 'undefined')
{
    module.exports = CTATRegexMatcher;
}
