/**-----------------------------------------------------------------------------
 $Author$
 $Date$
 $HeadURL$
 $Revision$

 -
 License:
 -
 ChangeLog:
 -
 Notes:
	Then you can also include base64 data in img tags like this

	<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAIAAABL1vtsAAAY

 */
goog.provide('CTATImageButton');

goog.require('CTATGlobalFunctions');
goog.require('CTATGlobals');
goog.require('CTATButtonBasedComponent');
goog.require('CTAT.ComponentRegistry');
/**
 *
 */
CTATImageButton = function(aDescription,aX,aY,aWidth,aHeight) {
	CTATButtonBasedComponent.call(this,
			"CTATImageButton",
			"__undefined__",
			aDescription,
			aX,
			aY,
			aWidth,
			aHeight);

	var pointer=this;

	/**
	 *
	 */
	this.init=function init()
	{
		pointer.setInitialized(true);
		pointer.setComponent(pointer.getDivWrap());

		pointer.addComponentReference(pointer, pointer.getDivWrap());

		pointer.setImage(pointer.getDivWrap().getAttribute("data-ctat-image-default"));

		var button = pointer.component;
		button.setAttribute('role','button');
		button.classList.add('CTAT-button');
		button.addEventListener ('click', pointer.processClick);
		button.addEventListener ('focus', pointer.processFocus);
		button.addEventListener ('mousedown', pointer.processBaseMousedown);
		button.addEventListener ('mouseup', pointer.processBaseMouseup);
		button.addEventListener ('mouseover',pointer.processBaseMouseover);
		button.addEventListener ('mouseout',pointer.processBaseMouseout);
	};

	var super_setEnabled = this.setEnabled;
	this.setEnabled = function(bool) {
		super_setEnabled(bool);
		if (pointer.getEnabled()) {
			pointer.setImage(pointer.getDivWrap().getAttribute("data-ctat-image-default"));
		} else {
			pointer.setImage(pointer.getDivWrap().getAttribute("data-ctat-image-disabled"));
		}
	};
	
	this.getConfigurationActions = function() {
		var c = this.getDivWrap();
		var hov = c.getAttribute('data-ctat-image-hover');
		var clk = c.getAttribute('data-ctat-image-clicked');
		var def = c.getAttribute('data-ctat-image-default');
		var dis = c.getAttribute('data-ctat-image-disabled');
		if (def) {
			var sai = new CTATSAI();
			sai.setSelection(this.getName());
			if (hov || clk || dis) {
				sai.setAction('assignImages');
				sai.setInputArray([hov,clk,def,dis]);
			} else {
				sai.setAction('assignImage');
				sai.setInput(def);
			}
			return [sai];
		}
		return [];
	};
};

CTATImageButton.prototype = Object.create(CTATButtonBasedComponent.prototype);
CTATImageButton.prototype.constructor = CTATImageButton;

CTAT.ComponentRegistry.addComponentType('CTATImageButton',CTATImageButton);
