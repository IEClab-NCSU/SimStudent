/**-----------------------------------------------------------------------------
 $Author$
 $Date$
 $HeadURL$
 $Revision$

 -
 License:
 -
 ChangeLog:
 -
 Notes:

  Events: click, mousemove, mouseover, mouseout, keyup, keydown,
  		  focus, blur, select, load

  CSS: http://tutobx.com/post/24806696944/raised-and-pressed-div-using-css
       http://stackoverflow.com/questions/5662178/opacity-of-divs-background-without-affecting-contained-element-in-ie-8

  Js:  http://www.quirksmode.org/js/this.html
       http://unschooled.org/2012/03/understanding-javascript-this/

*/
goog.provide('CTATTextField');

goog.require('CTATGlobalFunctions');
goog.require('CTATGlobals');
goog.require('CTATTextBasedComponent');
/**
 *
 */
CTATTextField = function(aDescription,
						aX,
						aY,
						aWidth,
						aHeight)
{
	CTATTextBasedComponent.call(this,
					  			"CTATTextBasedComponent",
					  			"__undefined__",
					  			aDescription,
					  			aX,
					  			aY,
					  			aWidth,
					  			aHeight);

	var pointer=this;
	var textfield=null;

	this.setAction('UpdateTextArea');

	/**
	*
	*/
	this.init=function init()
	{
	    textfield=this.getDivWrap(); //document.createElement('div');

	    pointer.setComponent(textfield);

	    if (this.getText())
	    	textfield.innerHTML=pointer.getText();

	    pointer.setInitialized(true);
	    pointer.addComponentReference(pointer, textfield);
		pointer.setEditable (false);
		pointer.setEnabled(false);
	    pointer.render();

	    pointer.addSafeEventListener ('focus', pointer.processFocus,textfield);

	};

	/**
	 * This is run during the generation of InterfaceDescription messages and
	 * it generates interface actions for options set by the author in the
	 * html code.
	 * @returns {Array<CTATSAI>} of SAIs.
	 */
	this.getConfigurationActions = function () {
	    // Add Author text if set so that brd can get it.
	    if (textfield.innerHTML.trim().length>0) {
	    	console.log(textfield.innerHTML);
	    	this.setInput(textfield.innerHTML.toString());
	    	return [this.getSAI()];
	    }
	    return [];
	};
	/**
	 *
	 * @param aText
	 */
	this.setText=function setText(aText)
	{
		pointer.ctatdebug("setText (" + aText + ")");

		pointer.assignText(aText);

		if (textfield!==null)
		{
			textfield.innerHTML=aText;
	    }
	};

	this.getValue = function () {
		return this.getDivWrap().innerHTML;
	};

	this.setStyleHandler("ShowScrollbars", function(bool) {
		if(CTATGlobalFunctions.toBoolean(bool)===true) {
			pointer.modifyCSSAttribute("overflow", "scroll");
		} else {
			pointer.modifyCSSAttribute("overflow", "hidden");
		}
	});
};

CTATTextField.prototype = Object.create(CTATTextBasedComponent.prototype);
CTATTextField.prototype.constructor = CTATTextField;

CTAT.ComponentRegistry.addComponentType('CTATTextField', CTATTextField);