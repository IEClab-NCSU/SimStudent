# Parse tree node for variables

goog.provide('CTATVariableNode')
goog.require('CTATTreeNode')

class CTATVariableNode extends CTATTreeNode
  constructor: (@variableTable, @variable, @parens = 0, @sign = 1, @exp = 1) -> @operator = 'VAR'
  clone: -> new CTATVariableNode @variableTable, @variable, @parens, @sign, @exp
  toString: -> super @variable
  evaluate: -> super @variableTable?.get(@variable) || try eval(@variable) catch then NaN
  equals: (node) -> super(node) and @variable is node.variable

  compare: (node, reverse) ->
    reverse = if reverse? then -1 else 1
    super or @variable > node.variable and reverse or @variable < node.variable and -reverse or
    @compareSigns(node, reverse)
  countVariables: -> 1

if module? then module.exports = CTATVariableNode else @CTATVariableNode = CTATVariableNode
