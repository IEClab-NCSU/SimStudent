/**
 * @fileoverview CTAT's default hint button component.  Uses SVG to render the
 * button.  In this implementation, the image should scale to the specified
 * dimensions.
 * @author $Author$
 * @version $Revision$
 */
goog.provide('CTATHintButton');

goog.require('CTATCommShell');
goog.require('CTAT.Component.Base.Clickable');
goog.require('CTAT.ComponentRegistry');
goog.require('CTATLanguageManager');

/**
 * Creates a hint button
 * @param {CTATComponentDescription} aDescription
 * @param {Number} aX
 * @param {Number} aY
 * @param {Number} aWidth
 * @param {Number} aHeight
 * @returns
 * @constructor
 * @extends {CTAT.Component.Base.SVGButton}
 */
CTATHintButton = function(aDescription,aX,aY,aWidth,aHeight) {
	CTAT.Component.Base.Clickable.call(this,'hint','CTATHintButton',aDescription,aX,aY,aWidth,aHeight);
	this.setName('hint');
	this.setClassName('CTATHintButton');
	this.isTabIndexable = false; // Hint button should probably never be in the tab order. FIXME: this might be a hack.
	this.setText(CTATGlobals.languageManager.getString ("HINT")); // add default label, override in BRD by setting labelText style property

	// With how this component works with CSS (and ignored these settings in AS3)
	// these settings from the SUI are not respected.
	this.setStyleHandler('BackgroundColor',null);
	this.setStyleHandler('TextAlign',null);
	this.setStyleHandler('BorderColor',null);
	this.setStyleHandler('FontFace',null);
	this.setStyleHandler('TextColor',null);

	this.init = function() {
		this.setInitialized(true);
		var comp = document.createElement('button');
		this.setComponent(comp);
		comp.classList.add('unselectable');
		comp.classList.add('CTAT-hint-button'); // hint button class for colors
		var qmark = document.createElement('div');
		qmark.classList.add('CTAT-hint-button--icon');
		qmark.textContent = '?';
		comp.appendChild(qmark);
		if (this.getText()) {
			var button_text = document.createElement('div');
			button_text.textContent = this.getText();
			comp.appendChild(button_text);
		}
		this.getDivWrap().appendChild(comp);
		comp.addEventListener('mouseenter',function(e) {
			e.target.classList.add('CTAT-hint-button--hover');
		});
		comp.addEventListener('mouseleave',function(e) {
			e.target.classList.remove('CTAT-hint-button--hover');
			e.target.classList.remove('CTAT-hint-button--clicked');
		});
		comp.addEventListener('mousedown', function(e) {
			e.target.classList.add('CTAT-hint-button--clicked');
		});
		comp.addEventListener('mouseup', function(e) {
			e.target.classList.remove('CTAT-hint-button--clicked');
		});
		comp.addEventListener('click', function(e) {
			e.target.classList.remove('CTAT-hint-button--clicked');
		});
		comp.addEventListener('click', this.processClick);
	};
	var pointer = this;

	this.processClick = function(e)
	{
		if (pointer.getEnabled() && CTATCommShell.commShell)
		{
			CTATCommShell.commShell.requestHint();
		}
	};
};

CTATHintButton.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATHintButton.prototype.constructor = CTATHintButton;
CTAT.ComponentRegistry.addComponentType('CTATHintButton', CTATHintButton);
